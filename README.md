# English Conversation Assistant (ECA)

å³æ™‚è‹±æ–‡å°è©±åŠ©æ‰‹ â€” è®“è‹±æ–‡é›»è©±ä¸å†ç„¦æ…®çš„å³æ™‚è¼”åŠ©å·¥å…·ã€‚

---
![ECA UI 1](/spec/eca_ui_1.png)
![ECA UI 2](/spec/eca_ui_2.png)

ğŸš€ **[é»æ“Šé€™è£¡è©¦ç”¨ Demo](https://english-conversation-assistant-686112121757.europe-west2.run.app/)**

## è¨­è¨ˆç†å¿µ

### æ ¸å¿ƒå•é¡Œ

> **ã€Œè½æ‡‚å°æ–¹èªªä»€éº¼ï¼ŒçŸ¥é“è‡ªå·±æ€éº¼èªªã€**

å°æ–¼éè‹±èªæ¯èªè€…ï¼ˆç‰¹åˆ¥æ˜¯é¦™æ¸¯ BNO ç§»æ°‘åœ¨è‹±åœ‹ï¼‰ï¼Œæ‰“é›»è©±çµ¦éŠ€è¡Œã€NHSã€æ°´é›»å…¬å¸æ™‚é¢è‡¨å…©å¤§æŒ‘æˆ°ï¼š

1. **è½ä¸æ‡‚**ï¼šå°æ–¹èªé€Ÿå¿«ã€å£éŸ³é‡ã€å°ˆæ¥­è¡“èªå¤š
2. **èªªä¸å‡º**ï¼šè…¦ä¸­æœ‰æƒ³æ³•ï¼Œä½†ç„¡æ³•å³æ™‚çµ„ç¹”è‹±æ–‡å¥å­

å‚³çµ±æ–¹æ¡ˆï¼ˆå¦‚ Google Translateï¼‰éœ€è¦æ‰‹å‹•è¼¸å…¥ï¼Œä¸­æ–·é€šè©±æµç¨‹ï¼Œå¯¦ç”¨æ€§ä½ã€‚

### è§£æ±ºæ–¹æ¡ˆ

ECA æ¡ç”¨**é›™è»Œä¸¦è¡Œæ¶æ§‹**ï¼ŒåŒæ™‚è§£æ±ºã€Œè½ã€å’Œã€Œèªªã€çš„å•é¡Œï¼š

| å•é¡Œ | è§£æ±ºæ–¹æ¡ˆ | å»¶é² |
|------|----------|------|
| è½ä¸æ‡‚è‹±æ–‡ | å³æ™‚è‹±æ–‡å­—å¹• + ä¸­æ–‡ç¿»è­¯ | 100ms + 700ms |
| èªªä¸å‡ºè‹±æ–‡ | é€šè©±å‰æº–å‚™è¬›ç¨¿ + å¿«æ·çŸ­èª | é å…ˆæº–å‚™ |
| è½æ¼é—œéµä¿¡æ¯ | ç¿»è­¯é©—è­‰ï¼ˆæ•¸å­—ã€é‡‘é¡ï¼‰ | å³æ™‚è­¦å‘Š |
| å°ˆæ¥­è¡“èªä¸æ‡‚ | å ´æ™¯è©åº«ï¼ˆéŠ€è¡Œ/NHS/æ°´é›»/ä¿éšªï¼‰ | è‡ªå‹•æç¤º |

### ç›®æ¨™ç”¨æˆ¶

- ğŸ‡¬ğŸ‡§ é¦™æ¸¯ BNO ç§»æ°‘åœ¨è‹±åœ‹
- éœ€è¦æ‰“é›»è©±çµ¦ UK æ©Ÿæ§‹ï¼ˆéŠ€è¡Œã€NHSã€æ°´é›»ã€ä¿éšªï¼‰
- è‹±æ–‡è½èªªèƒ½åŠ›ä¸­ç­‰ï¼Œä½†å°å°ˆæ¥­è¡“èªå’Œå¿«é€Ÿå°è©±æ„Ÿåˆ°ç„¦æ…®
- å¸Œæœ›åœ¨é€šè©±æ™‚æœ‰å³æ™‚è¼”åŠ©ï¼Œè€Œéä¾è³´ç¿»è­¯è»Ÿä»¶

### ä½¿ç”¨å ´æ™¯

1. **é€šè©±å‰**ï¼šé¸æ“‡å ´æ™¯ â†’ ç”Ÿæˆè¬›ç¨¿ â†’ ç†Ÿæ‚‰é—œéµå¥å­
2. **é€šè©±ä¸­**ï¼šçœ‹å³æ™‚è‹±æ–‡å­—å¹• â†’ çœ‹ä¸­æ–‡ç¿»è­¯ â†’ ç”¨å¿«æ·çŸ­èªå›æ‡‰
3. **æˆ‘åœ¨èªªè©±æ™‚**ï¼šæŒ‰ä½ Spacebar â†’ æ¨™è¨˜ç‚ºã€Œæˆ‘ã€â†’ å€åˆ†å°è©±é›™æ–¹
4. **é‡åˆ°å›°é›£**ï¼šæŒ‰ Panic Button â†’ é¡¯ç¤ºæ‹–å»¶èª â†’ çˆ­å–æ€è€ƒæ™‚é–“

---

## åŠŸèƒ½ç‰¹è‰²

### ğŸ¤ å³æ™‚è‹±æ–‡å­—å¹•ï¼ˆKaraoke æ•ˆæœï¼‰
- ä½¿ç”¨ Web Speech API å¯¦ç¾ã€Œé‚Šèªªé‚Šé¡¯ç¤ºã€è‹±æ–‡å­—å¹•
- å»¶é²ç´„ 100msï¼Œæä¾›å³æ™‚è¦–è¦ºå›é¥‹
- Karaoke å¼ç™¼å…‰æ•ˆæœï¼Œæ¸…æ™°é¡¯ç¤ºæ­£åœ¨èªªçš„å…§å®¹

### ğŸŒ æ™ºèƒ½ä¸­æ–‡ç¿»è­¯
- ä½¿ç”¨ `gpt-4.1-nano` é€²è¡Œå³æ™‚ä¸²æµç¿»è­¯ï¼ˆ~700ms é¦–å­—å›æ‡‰ï¼‰
- æ•¸å­—ã€é‡‘é¡ã€æ—¥æœŸä¿æŒé˜¿æ‹‰ä¼¯æ•¸å­—æ ¼å¼ï¼Œæ˜“æ–¼æ ¸å°

### ğŸ“š å ´æ™¯è©åº«ï¼ˆUK å°ˆç”¨ï¼‰
- 4 å€‹å ´æ™¯ï¼šéŠ€è¡Œã€NHS é†«ç™‚ã€æ°´é›»ã€ä¿éšª
- é ˜åŸŸè¡“èªè‡ªå‹•æç¤ºç¿»è­¯ï¼ˆå¦‚ direct debit â†’ ç›´æ¥ä»˜æ¬¾æˆæ¬Šï¼‰
- é¿å…å¸¸è¦‹èª¤è­¯ï¼ˆå¦‚ NHS surgery â†’ è¨ºæ‰€ï¼Œéæ‰‹è¡“ï¼‰

### âœ… ç¿»è­¯å“è³ªé©—è­‰
- è‡ªå‹•æª¢æ¸¬æ•¸å­—/é‡‘é¡éŒ¯èª¤
- ä½ä¿¡å¿ƒç¿»è­¯è­¦å‘Šæç¤º
- é¡¯ç¤ºã€Œè«‹å°ç…§è‹±æ–‡åŸæ–‡ã€è­¦å‘Š

### âœ‚ï¸ æ™ºèƒ½åˆ†æ®µ (SmartSegmenter)
- 600ms åœé “è‡ªå‹•åµæ¸¬å¥å­é‚Šç•Œ
- èªæ³•ç·šç´¢è¼”åŠ©åˆ†æ®µï¼ˆå¦‚ "right", "okay", "thanks"ï¼‰
- é•·åº¦ä¿è­·ï¼š15 å­—è»Ÿæ€§é™åˆ¶ã€25 å­—ç¡¬æ€§é™åˆ¶
- éæ¿¾å¡«å……è©ï¼ˆum, uh, hmmï¼‰

### ğŸ¯ é€šè©±è¼”åŠ©åŠŸèƒ½
- **é€šè©±å‰æº–å‚™**ï¼šé¸æ“‡å ´æ™¯ã€ç”Ÿæˆè¬›ç¨¿
- **å ´æ™¯é è¨­è¬›ç¨¿**ï¼šæ¯å€‹å ´æ™¯æœ‰ 5 å€‹å¸¸ç”¨ç›®çš„ï¼Œä¸€éµç”Ÿæˆè¬›ç¨¿
- **Quick Response Bar**ï¼šå¿«æ·çŸ­èªä¸€éµèª¿ç”¨
- **Panic Button**ï¼šç·Šæ€¥æ™‚é¡¯ç¤ºæ‹–å»¶èª
- **æš«åœ/ç¹¼çºŒ**ï¼šéš¨æ™‚æš«åœæ”¶éŸ³ï¼Œä¸é›¢é–‹é€šè©±
- **åŒ¯å‡ºå°è©±è¨˜éŒ„**ï¼šä¸€éµåŒ¯å‡º Markdown æ ¼å¼å°è©±è¨˜éŒ„

### ğŸ­ è§’è‰²æ¨™è¨˜ï¼ˆSpeaker Attributionï¼‰
- **Spacebar HOLD æ¨¡å¼**ï¼šæŒ‰ä½ Spacebar = ã€Œæˆ‘åœ¨èªªè©±ã€ï¼Œæ”¾é–‹ = ã€Œå°æ–¹èªªè©±ã€
- è‡ªå‹•æ¨™è¨˜æ¯å€‹æ®µè½çš„èªªè©±è€…èº«ä»½ï¼ˆğŸ‘¤ å°æ–¹ / ğŸ™‹ æˆ‘ï¼‰
- è¦–è¦ºå€åˆ†ï¼šå°æ–¹æ®µè½ï¼ˆç¶ è‰²é‚Šæ¡†ï¼‰vs æˆ‘çš„æ®µè½ï¼ˆè—è‰²é‚Šæ¡†ï¼‰
- åº•éƒ¨æŒ‡ç¤ºå™¨å³æ™‚é¡¯ç¤ºç•¶å‰æ”¶éŸ³å°è±¡
- åŒ¯å‡ºæ™‚ä¿ç•™èªªè©±è€…æ¨™è¨˜

### ğŸŒ å¤šèªè¨€ä»‹é¢
- æ”¯æ´ 4 ç¨®èªè¨€ï¼šç¹é«”ä¸­æ–‡ï¼ˆé¦™æ¸¯ï¼‰ã€ç¹é«”ä¸­æ–‡ï¼ˆå°ç£ï¼‰ã€ç°¡é«”ä¸­æ–‡ã€English
- ä»‹é¢æ–‡å­—è‡ªå‹•åˆ‡æ›ï¼ŒåŒ…æ‹¬æŒ‰éˆ•ã€æç¤ºã€éŒ¯èª¤è¨Šæ¯
- èªè¨€åå¥½è‡ªå‹•å„²å­˜æ–¼ localStorage

### ğŸ”‘ ç”¨æˆ¶ API Key ç®¡ç†
- ç”¨æˆ¶å¯è‡ªè¡Œè¨­å®š OpenAI API Keyï¼ˆé©åˆ Cloud Run éƒ¨ç½²ï¼‰
- API Key åªå­˜æ–¼ç€è¦½å™¨ localStorageï¼Œä¼ºæœå™¨ä¸æœƒå„²å­˜
- æ”¯æ´éš¨æ™‚æ¸…é™¤ã€æ›´æ› API Key

### ğŸ“¤ åŒ¯å‡ºåŠŸèƒ½
é€šè©±çµæŸå¾Œï¼Œå¯åŒ¯å‡ºå®Œæ•´å°è©±è¨˜éŒ„ï¼ˆMarkdown æ ¼å¼ï¼‰ï¼š
- åŒ¯å‡ºæ—¥æœŸã€æ™‚é–“ã€é€šè©±æ™‚é•·
- å·²ç¿»è­¯æ®µæ•¸ã€ä½¿ç”¨å ´æ™¯
- æ¯æ®µè‹±æ–‡åŸæ–‡ + ä¸­æ–‡ç¿»è­¯ + **èªªè©±è€…æ¨™è¨˜**
- è‡ªå‹•ä¸‹è¼‰ç‚º `.md` æª”æ¡ˆ

### âš¡ å ´æ™¯é è¨­è¬›ç¨¿
| å ´æ™¯ | å¸¸ç”¨ç›®çš„ |
|------|----------|
| éŠ€è¡Œ | æŸ¥è©¢é¤˜é¡ã€ä¸æ˜æ”¶è²»ã€æ›´æ–°è³‡æ–™ã€é–‹æˆ¶å’¨è©¢ã€è½‰å¸³å•é¡Œ |
| é†«ç™‚ | é ç´„ GPã€é ˜è™•æ–¹ç°½ã€è½‰è¨ºé€²åº¦ã€æª¢é©—çµæœã€å–æ¶ˆé ç´„ |
| æ°´é›» | æŸ¥å¸³å–®ã€æ›´æ–°ä»˜æ¬¾ã€å ±è®€æ•¸ã€æ›æ–¹æ¡ˆã€æ¬å®¶é€šçŸ¥ |
| ä¿éšª | ä¿éšœç¯„åœã€æå‡ºç†è³ ã€çºŒç´„ä¿è²»ã€æ›´æ”¹è³‡æ–™ã€å–æ¶ˆä¿å–® |
| ä¸€èˆ¬ | ä¸€èˆ¬è©¢å•ã€ç¢ºèªç‹€æ…‹ã€å®¢æœè½‰æ¥ã€æŠ•è¨´åæ˜ ã€æ„Ÿè¬çµæŸ |

### ğŸ“Š é›™è»Œæ¶æ§‹
```
éº¥å…‹é¢¨éŸ³è¨Š
    â”‚
    â”œâ”€â”€â†’ Web Speech API â”€â”€â†’ å³æ™‚è‹±æ–‡é è¦½ï¼ˆKaraoke æ•ˆæœï¼Œ~100msï¼‰
    â”‚
    â””â”€â”€â†’ SmartSegmenter â”€â”€â†’ /api/translate/stream â”€â”€â†’ ä¸­æ–‡ç¿»è­¯
                â”‚                   â”‚
                â”‚                   â””â”€â”€ + å ´æ™¯è©åº«æç¤º
                â”‚                   â””â”€â”€ + ç¿»è­¯é©—è­‰
                â”‚
                â””â”€â”€ + è§’è‰²æ¨™è¨˜ï¼ˆSpacebar HOLD = æˆ‘ / æ”¾é–‹ = å°æ–¹ï¼‰
```

## å¿«é€Ÿé–‹å§‹

### å‰ç½®éœ€æ±‚

| éœ€æ±‚ | èªªæ˜ |
|------|------|
| Python | 3.10+ |
| ç€è¦½å™¨ | Chrome / Edgeï¼ˆéœ€æ”¯æ´ Web Speech APIï¼‰|
| OpenAI API Key | éœ€å•Ÿç”¨ä»¥ä¸‹æ¨¡å‹å­˜å–æ¬Šé™ |

### API Key éœ€æ±‚

æœ¬å°ˆæ¡ˆ**åªéœ€è¦ä¸€å€‹ OpenAI API Key**ï¼Œä½†éœ€ç¢ºä¿å¸³è™Ÿæœ‰ä»¥ä¸‹æ¨¡å‹çš„å­˜å–æ¬Šé™ï¼š

| æ¨¡å‹ | ç”¨é€” | å¿…è¦æ€§ |
|------|------|--------|
| `gpt-4.1-nano` | å³æ™‚ç¿»è­¯ | âœ… å¿…è¦ |
| `gpt-5-mini` | è¬›ç¨¿ç”Ÿæˆ | âœ… å¿…è¦ |

> ğŸ’¡ **è²»ç”¨ä¼°ç®—**ï¼šä¸€é€š 10 åˆ†é˜é›»è©±ç´„ä½¿ç”¨ $0.05-0.10 USDï¼ˆè¦–å°è©±é‡è€Œå®šï¼‰

### æ­¥é©Ÿ 1ï¼šå®‰è£ä¾è³´
```bash
pip install -r requirements.txt
```

### æ­¥é©Ÿ 2ï¼šè¨­å®šç’°å¢ƒè®Šæ•¸
```bash
# Windows (CMD)
set OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx

# Windows (PowerShell)
$env:OPENAI_API_KEY="sk-xxxxxxxxxxxxxxxxxxxxxxxx"

# Mac/Linux
export OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxx
```

### æ­¥é©Ÿ 3ï¼šå•Ÿå‹•å¾Œç«¯
```bash
cd src/backend
python main.py
```

### æ­¥é©Ÿ 4ï¼šé–‹å•Ÿç€è¦½å™¨
```
http://localhost:8000
```

### æ­¥é©Ÿ 5ï¼šé–‹å§‹ä½¿ç”¨
1. é¸æ“‡å ´æ™¯ï¼ˆéŠ€è¡Œ/NHS/æ°´é›»/ä¿éšªï¼‰
2. é»æ“Šã€Œé–‹å§‹è†è½ã€
3. å…è¨±éº¥å…‹é¢¨æ¬Šé™
4. é–‹å§‹ä½ çš„é›»è©±é€šè©±ï¼ˆæ“´éŸ³æ¨¡å¼ï¼‰

## Cloud Run éƒ¨ç½²

ECA æ”¯æ´éƒ¨ç½²åˆ° Google Cloud Runï¼Œç”¨æˆ¶å¯ä½¿ç”¨è‡ªå·±çš„ OpenAI API Keyã€‚

### æ–¹æ³•ä¸€ï¼šGitHub è‡ªå‹•éƒ¨ç½²ï¼ˆæ¨è–¦ï¼‰

åœ¨ Google Cloud Console ä¸­ç›´æ¥é€£æ¥ GitHubï¼Œå¯¦ç¾æ¨é€å³éƒ¨ç½²ï¼š

1. é–‹å•Ÿ [Cloud Run Console](https://console.cloud.google.com/run)
2. é»æ“Šã€ŒCreate Serviceã€
3. é¸æ“‡ã€ŒContinuously deploy from a repository (source or function)ã€
4. é»æ“Šã€ŒSet up with Cloud Buildã€â†’ é€£æ¥ä½ çš„ GitHub å¸³è™Ÿ
5. é¸æ“‡æ­¤ Repository
6. Build Type é¸æ“‡ã€ŒDockerfileã€
7. è¨­å®šï¼š
   - Region: é¸æ“‡é è¿‘ç”¨æˆ¶çš„å€åŸŸ
   - Authentication: é¸æ“‡ã€ŒAllow public accessã€
8. é»æ“Šã€ŒCreateã€

éƒ¨ç½²å®Œæˆå¾Œï¼Œæ¯æ¬¡æ¨é€åˆ° main åˆ†æ”¯éƒ½æœƒè‡ªå‹•é‡æ–°éƒ¨ç½²ã€‚

### æ–¹æ³•äºŒï¼šæ‰‹å‹•éƒ¨ç½²ï¼ˆgcloud CLIï¼‰

```bash
# å¾æºç¢¼ç›´æ¥éƒ¨ç½²ï¼ˆç„¡éœ€ Dockerï¼‰
gcloud run deploy eca-app \
  --source . \
  --platform managed \
  --region asia-east1 \
  --allow-unauthenticated
```

### ç”¨æˆ¶ä½¿ç”¨æ–¹å¼

éƒ¨ç½²å®Œæˆå¾Œï¼Œç”¨æˆ¶éœ€è¦è¨­å®šè‡ªå·±çš„ OpenAI API Keyï¼š

1. é–‹å•Ÿ Cloud Run æä¾›çš„ç¶²å€
2. å±•é–‹ã€Œè¨­å®šã€é¸å–®
3. åœ¨ã€ŒAPI Key è¨­å®šã€è¼¸å…¥è‡ªå·±çš„ OpenAI API Key
4. é»æ“Šã€Œå„²å­˜ã€
5. é–‹å§‹ä½¿ç”¨

> ğŸ”’ **å®‰å…¨èªªæ˜**ï¼š
> - API Key åªå­˜æ–¼ç”¨æˆ¶ç€è¦½å™¨çš„ localStorage
> - ä¼ºæœå™¨ä¸æœƒå„²å­˜æˆ–è¨˜éŒ„ API Key
> - æ‰€æœ‰è«‹æ±‚é€é HTTPS åŠ å¯†å‚³è¼¸

## æŠ€è¡“æ¶æ§‹

### ç³»çµ±ç¸½è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ¶é›»è©±é€šè©±ï¼ˆæ“´éŸ³æ¨¡å¼ï¼‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          éº¥å…‹é¢¨æ”¶éŸ³                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â–¼                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Speech API    â”‚                 â”‚   SmartSegmenter    â”‚
â”‚   (ç€è¦½å™¨åŸç”Ÿ)       â”‚                 â”‚   æ™ºèƒ½åˆ†æ®µå™¨         â”‚
â”‚   ~100ms å»¶é²        â”‚                 â”‚   600ms æš«åœåµæ¸¬     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                       â”‚
            â–¼                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å³æ™‚è‹±æ–‡å­—å¹•       â”‚                 â”‚   åˆ†æ®µå¾Œæ–‡å­—         â”‚
â”‚   (Karaoke æ•ˆæœ)    â”‚                 â”‚   è§¸ç™¼ç¿»è­¯ API      â”‚
â”‚                     â”‚                 â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚  /api/translate     â”‚
                                        â”‚   gpt-4.1-nano      â”‚
                                        â”‚   ä¸²æµä¸­æ–‡ç¿»è­¯       â”‚
                                        â”‚   ~700ms é¦–å­—        â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚   ä¸­æ–‡ç¿»è­¯é¡¯ç¤º       â”‚
                                        â”‚   + å ´æ™¯è©åº«æç¤º     â”‚
                                        â”‚   + ç¿»è­¯é©—è­‰è­¦å‘Š     â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ¶æº–å‚™å›æ‡‰                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚ è¬›ç¨¿ç”Ÿæˆ     â”‚  â”‚ QuickçŸ­èª   â”‚  â”‚ Panic Buttonâ”‚            â”‚
â”‚   â”‚ gpt-5-mini  â”‚  â”‚ é è¨­ 4 å¥   â”‚  â”‚ 8 å¥æ‹–å»¶èª   â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å‹ä½¿ç”¨ç¸½è¦½

| åŠŸèƒ½ | æ¨¡å‹ | API ç«¯é» | å»¶é² | èªªæ˜ |
|------|------|----------|------|------|
| å³æ™‚è‹±æ–‡é è¦½ | Web Speech API | ç€è¦½å™¨åŸç”Ÿ | ~100ms | å…è²»ï¼Œç„¡éœ€ API Key |
| æ™ºèƒ½åˆ†æ®µ | SmartSegmenter | å‰ç«¯ | ~600ms | æš«åœåµæ¸¬ + èªæ³•ç·šç´¢ |
| ç¿»è­¯ï¼ˆè‹±â†’ä¸­ï¼‰| `gpt-4.1-nano` | `/api/translate/stream` | ~700ms | æœ€å¿«ç¿»è­¯æ¨¡å‹ |
| è¬›ç¨¿ç”Ÿæˆï¼ˆä¸­â†’è‹±ï¼‰| `gpt-5-mini` | `/api/script/stream` | ~1.5s | é«˜å“è³ªç”Ÿæˆ |

### ç‚ºä½•é¸æ“‡é€™äº›æ¨¡å‹ï¼Ÿ

| æ¨¡å‹ | é¸æ“‡åŸå›  |
|------|----------|
| `gpt-4.1-nano` | ç¿»è­¯æœ€å¿«ï¼ˆ703msï¼‰ï¼Œæ¯” gpt-5-mini å¿« 5 å€ |
| `gpt-5-mini` | æ”¯æ´ 400k contextï¼Œé©åˆé•·å°è©±å’Œè¤‡é›œç”Ÿæˆ |

> âš ï¸ **ä¸èƒ½ç”¨ gpt-5-mini åšç¿»è­¯**ï¼šå®ƒæ˜¯ reasoning æ¨¡å‹ï¼Œéœ€ 5-6 ç§’æ‰èƒ½å›æ‡‰

### çµ„ä»¶è©³ç´°

| çµ„ä»¶ | æŠ€è¡“ | ç”¨é€” |
|------|------|------|
| å³æ™‚è‹±æ–‡é è¦½ | Web Speech API | é‚Šèªªé‚Šé¡¯ç¤ºï¼ˆ~100ms å»¶é²ï¼‰ |
| æ™ºèƒ½åˆ†æ®µ | SmartSegmenter | 600ms åœé “åµæ¸¬ + èªæ³•ç·šç´¢ |
| ä¸²æµç¿»è­¯ | gpt-4.1-nano | è‹±æ–‡â†’ç¹é«”ä¸­æ–‡ï¼ˆ~700ms é¦–å­—ï¼‰|
| å ´æ™¯è©åº« | domain_glossaries.json | UK å°ˆç”¨è¡“èªæç¤º |
| ç¿»è­¯é©—è­‰ | TranslationValidator | æ•¸å­—/ä¿¡å¿ƒæª¢æ¸¬ |
| è¬›ç¨¿ç”Ÿæˆ | gpt-5-mini | ä¸­æ–‡â†’è‹±æ–‡è¬›ç¨¿ |
| å¾Œç«¯ | Python FastAPI | API æœå‹™ |
| å‰ç«¯ | Vanilla JS | å–®é æ‡‰ç”¨ |

## å°ˆæ¡ˆçµæ§‹

```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ backend/
â”‚   â”‚   â”œâ”€â”€ main.py                 # FastAPI å¾Œç«¯
â”‚   â”‚   â”œâ”€â”€ glossary.py             # å ´æ™¯è©åº«æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ domain_glossaries.json  # UK é ˜åŸŸè©åº«
â”‚   â”‚   â””â”€â”€ script_generator.py     # è¬›ç¨¿ç”Ÿæˆ
â”‚   â””â”€â”€ frontend/
â”‚       â”œâ”€â”€ eca.html  # ä¸»é é¢
â”‚       â”œâ”€â”€ smart_segmenter.js      # æ™ºèƒ½åˆ†æ®µå™¨
â”‚       â”œâ”€â”€ webspeech_realtime.js   # Web Speech å°è£
â”‚       â””â”€â”€ translation_validator.js # ç¿»è­¯é©—è­‰å™¨
â”œâ”€â”€ spec/
â”‚   â”œâ”€â”€ requirements.md             # éœ€æ±‚è¦æ ¼
â”‚   â”œâ”€â”€ design.md                   # è¨­è¨ˆæ–‡æª”
â”‚   â”œâ”€â”€ tasks.md                    # ä»»å‹™æ¸…å–®
â”‚   â””â”€â”€ lessons_learned.md          # ç¶“é©—æ•™è¨“è¨˜éŒ„
â””â”€â”€ CLAUDE.md                       # AI é–‹ç™¼è¦å‰‡
```

## æˆæ¬Š

MIT License
